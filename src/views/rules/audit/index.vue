<template>
  <div class="audit-settings-container">
    <!-- щб╡щЭвцаЗщвШцаП -->
    <div class="page-header">
      <div class="page-title">ш┤ицОзхобца╕шо╛ч╜о</div>
      <div class="page-actions">
        <button class="btn btn-outline" @click="resetToDefault">
          <i>ЁЯФД</i> цБвхдНщ╗Шшод
        </button>
        <button class="btn btn-outline" @click="exportSettings">
          <i>ЁЯУд</i> хп╝хЗ║щЕНч╜о
        </button>
        <button class="btn btn-primary" @click="saveAllSettings">
          <i>ЁЯТ╛</i> ф┐ЭхнШцЙАцЬЙшо╛ч╜о
        </button>
      </div>
    </div>

    <!-- шо╛ч╜охИЖч▒╗хп╝шИк -->
    <div class="settings-categories">
      <div 
        v-for="category in settingsCategories" 
        :key="category.key"
        class="category-item"
        :class="{ active: activeCategory === category.key }"
        @click="switchCategory(category.key)"
      >
        <i>{{ category.icon }}</i>
        <span>{{ category.name }}</span>
      </div>
    </div>

    <!-- шо╛ч╜охЖЕхо╣хМ║хЯЯ -->
    <div class="settings-main">
      <!-- шЗкхКихобца╕шо╛ч╜о -->
      <div v-show="activeCategory === 'auto'" class="settings-section">
        <div class="card">
          <div class="card-header">
            <div class="card-title">шЗкхКихобца╕щЕНч╜о</div>
            <div class="card-actions">
              <span class="status-indicator" :class="autoAuditSettings.enabled ? 'active' : 'inactive'">
                {{ autoAuditSettings.enabled ? 'х╖▓хРпчФи' : 'х╖▓чжБчФи' }}
              </span>
            </div>
          </div>
          <div class="card-body">
            <div class="settings-grid">
              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хРпчФишЗкхКихобца╕</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="autoAuditSettings.enabled"
                      @change="onAutoAuditToggle"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  ч│╗ч╗ЯшЗкхКихп╣цЦ░хвЮчЧЕф╛Лш┐ЫшбМш┤ицОзхобца╕я╝МцПРщлШхобца╕цХИчОЗхТМхЗЖчбоцАз
                </div>
              </div>

              <div class="setting-item" :class="{ disabled: !autoAuditSettings.enabled }">
                <div class="setting-header">
                  <label class="setting-label">шЗкхКихобца╕щвСчОЗ</label>
                </div>
                <div class="setting-control">
                  <select 
                    class="form-control" 
                    v-model="autoAuditSettings.frequency"
                    :disabled="!autoAuditSettings.enabled"
                  >
                    <option value="realtime">хоЮцЧ╢хобца╕</option>
                    <option value="hourly">цпПх░ПцЧ╢хобца╕</option>
                    <option value="daily">цпПхдйхобца╕</option>
                    <option value="manual">цЙЛхКишзжхПС</option>
                  </select>
                </div>
                <div class="setting-description">
                  шо╛ч╜оч│╗ч╗ЯцЙзшбМшЗкхКихобца╕чЪДцЧ╢щЧ┤щЧ┤щЪФ
                </div>
              </div>

              <div class="setting-item" :class="{ disabled: !autoAuditSettings.enabled }">
                <div class="setting-header">
                  <label class="setting-label">хобца╕ф╝ШхЕИч║зшзДхИЩ</label>
                </div>
                <div class="setting-control">
                  <select 
                    class="form-control" 
                    v-model="autoAuditSettings.priority"
                    :disabled="!autoAuditSettings.enabled"
                  >
                    <option value="admission">цМЙхЕещЩвщб║х║П</option>
                    <option value="discharge">цМЙхЗ║щЩвщб║х║П</option>
                    <option value="department">щЗНчВ╣чзСходф╝ШхЕИ</option>
                    <option value="disease">щЗНчВ╣чЧЕчзНф╝ШхЕИ</option>
                    <option value="urgency">ч┤зцАечиЛх║жф╝ШхЕИ</option>
                  </select>
                </div>
                <div class="setting-description">
                  чбохоЪч│╗ч╗ЯшЗкхКихобца╕чЧЕф╛ЛчЪДф╝ШхЕИщб║х║П
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хРпчФиAIш╛ЕхКйхобца╕</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="autoAuditSettings.aiAssisted"
                      @change="onAIAssistedToggle"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  ф╜┐чФиф║║х╖ецЩ║шГ╜цКАцЬпш╛ЕхКйхобца╕хЖ│чнЦхТМщЧощвШшпЖхИля╝МцПРщлШхобца╕ч▓╛хЗЖх║ж
                </div>
              </div>

              <div class="setting-item" :class="{ disabled: !autoAuditSettings.aiAssisted }">
                <div class="setting-header">
                  <label class="setting-label">AIшЗкхКиф┐оцнгцЭГщЩР</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="autoAuditSettings.aiAutoCorrect"
                      :disabled="!autoAuditSettings.aiAssisted"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  хп╣ф║ОцШОчбочЪДщЧощвШя╝МхЕБшо╕AIч│╗ч╗ЯчЫ┤цОеш┐ЫшбМф┐оцнгя╝МцЧащЬАф║║х╖ех╣▓щвД
                </div>
              </div>

              <div class="setting-item" :class="{ disabled: !autoAuditSettings.aiAssisted }">
                <div class="setting-header">
                  <label class="setting-label">AIч╜оф┐бх║жщШИхА╝</label>
                </div>
                <div class="setting-control">
                  <div class="slider-container">
                    <input 
                      type="range" 
                      class="slider" 
                      min="50" 
                      max="100" 
                      v-model="autoAuditSettings.aiConfidenceThreshold"
                      :disabled="!autoAuditSettings.aiAssisted"
                    />
                    <div class="slider-value">{{ autoAuditSettings.aiConfidenceThreshold }}%</div>
                  </div>
                </div>
                <div class="setting-description">
                  AIхИдцЦнч╜оф┐бх║жф╜Оф║ОцндщШИхА╝чЪДщЧощвШх░Жш╜мчФ▒ф║║х╖ехобца╕
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button class="btn btn-primary" @click="saveAutoAuditSettings">
              ф┐ЭхнШшЗкхКихобца╕шо╛ч╜о
            </button>
          </div>
        </div>
      </div>

      <!-- хобца╕ц╡БчиЛшо╛ч╜о -->
      <div v-show="activeCategory === 'workflow'" class="settings-section">
        <div class="card">
          <div class="card-header">
            <div class="card-title">хобца╕ц╡БчиЛщЕНч╜о</div>
            <div class="card-actions">
              <button class="btn btn-sm btn-outline" @click="previewWorkflow">
                <i>ЁЯСБя╕П</i> щвДшзИц╡БчиЛ
              </button>
            </div>
          </div>
          <div class="card-body">
            <div class="settings-grid">
              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хобца╕ц╡БчиЛч▒╗хЮЛ</label>
                </div>
                <div class="setting-control">
                  <div class="radio-group">
                    <label class="radio-item">
                      <input 
                        type="radio" 
                        value="single" 
                        v-model="workflowSettings.type"
                        @change="onWorkflowTypeChange"
                      />
                      <span class="radio-label">хНХф║║хобца╕</span>
                      <span class="radio-description">ф╕АхРНш┤ицОзф║║хСШхоМцИРхЕищГихобца╕</span>
                    </label>
                    <label class="radio-item">
                      <input 
                        type="radio" 
                        value="double" 
                        v-model="workflowSettings.type"
                        @change="onWorkflowTypeChange"
                      />
                      <span class="radio-label">хПМф║║хобца╕</span>
                      <span class="radio-description">ф╕дхРНш┤ицОзф║║хСШф║дхПЙхобца╕</span>
                    </label>
                    <label class="radio-item">
                      <input 
                        type="radio" 
                        value="triple" 
                        v-model="workflowSettings.type"
                        @change="onWorkflowTypeChange"
                      />
                      <span class="radio-label">ф╕Йч║зхобца╕</span>
                      <span class="radio-description">хИЭхобуАБхдНхобуАБч╗Ихобф╕Йч║зц╡БчиЛ</span>
                    </label>
                  </div>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">щЧощвШхдДчРЖцЧ╢щЩР</label>
                </div>
                <div class="setting-control">
                  <div class="input-group">
                    <input 
                      type="number" 
                      class="form-control" 
                      v-model="workflowSettings.timeLimit"
                      min="1" 
                      max="168"
                    />
                    <span class="input-group-text">х░ПцЧ╢</span>
                  </div>
                </div>
                <div class="setting-description">
                  ш╢Еш┐ЗцЧ╢щЩРцЬкхдДчРЖчЪДщЧощвШх░ЖшЗкхКихНЗч║зцПРщЖТчЫ╕хЕ│ш┤Яш┤гф║║
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хРпчФихобца╕щААхЫЮ</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="workflowSettings.allowReturn"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  хЕБшо╕ш┤ицОзф║║хСШх░ЖцЬЙщЧощвШчЪДчЧЕф╛ЛщААхЫЮч╗ЩхМ╗х╕Иш┐ЫшбМф┐оцФ╣
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хРпчФишЗкхКихИЖщЕН</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="workflowSettings.autoAssign"
                      @change="onAutoAssignToggle"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  ч│╗ч╗Яца╣цНох╖еф╜Ьш┤Яш╜╜шЗкхКихИЖщЕНхобца╕ф╗╗хКбч╗Щш┤ицОзф║║хСШ
                </div>
              </div>

              <div class="setting-item" :class="{ disabled: !workflowSettings.autoAssign }">
                <div class="setting-header">
                  <label class="setting-label">хИЖщЕНчнЦчХе</label>
                </div>
                <div class="setting-control">
                  <select 
                    class="form-control" 
                    v-model="workflowSettings.assignStrategy"
                    :disabled="!workflowSettings.autoAssign"
                  >
                    <option value="round-robin">ш╜ошпвхИЖщЕН</option>
                    <option value="workload">ш┤Яш╜╜хЭЗшбб</option>
                    <option value="expertise">ф╕Уф╕ЪхМ╣щЕН</option>
                    <option value="random">щЪПцЬ║хИЖщЕН</option>
                  </select>
                </div>
                <div class="setting-description">
                  щАЙцЛйч│╗ч╗ЯшЗкхКихИЖщЕНф╗╗хКбчЪДчнЦчХечоЧц│Х
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хРпчФиш┤ицОзшпДхИЖ</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="workflowSettings.enableScoring"
                      @change="onScoringToggle"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  хп╣цпПф╗╜чЧЕф╛Лш┐ЫшбМш┤ищЗПшпДхИЖя╝МчФЯцИРш┤ицОзч╗ЯшобцКехСК
                </div>
              </div>

              <div class="setting-item" :class="{ disabled: !workflowSettings.enableScoring }">
                <div class="setting-header">
                  <label class="setting-label">шпДхИЖцаЗхЗЖ</label>
                </div>
                <div class="setting-control">
                  <select 
                    class="form-control" 
                    v-model="workflowSettings.scoringStandard"
                    :disabled="!workflowSettings.enableScoring"
                  >
                    <option value="national">хЫ╜хо╢цаЗхЗЖ</option>
                    <option value="provincial">чЬБч║зцаЗхЗЖ</option>
                    <option value="hospital">хМ╗щЩвцаЗхЗЖ</option>
                    <option value="custom">шЗкхоЪф╣ЙцаЗхЗЖ</option>
                  </select>
                </div>
                <div class="setting-description">
                  щАЙцЛйш┤ицОзшпДхИЖф╜┐чФичЪДцаЗхЗЖф╜Уч│╗
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button class="btn btn-primary" @click="saveWorkflowSettings">
              ф┐ЭхнШц╡БчиЛшо╛ч╜о
            </button>
          </div>
        </div>
      </div>

      <!-- щАЪчЯешо╛ч╜о -->
      <div v-show="activeCategory === 'notification'" class="settings-section">
        <div class="card">
          <div class="card-header">
            <div class="card-title">хобца╕щАЪчЯещЕНч╜о</div>
          </div>
          <div class="card-body">
            <div class="settings-grid">
              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">щЧощвШхПСчО░щАЪчЯе</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="notificationSettings.issueFound"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  цЦ░чЪДш┤ицОзщЧощвШшвлхПСчО░цЧ╢члЛхН│щАЪчЯечЫ╕хЕ│хМ╗х╕ИхТМш┤ицОзф║║хСШ
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хдДчРЖцЧ╢щЩРцПРщЖТ</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="notificationSettings.deadlineReminder"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  щЧощвШцОеш┐СхдДчРЖцЧ╢щЩРцЧ╢хПСщАБцПРщЖТщАЪчЯе
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">ф╗╗хКбхИЖщЕНщАЪчЯе</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="notificationSettings.taskAssignment"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  цЦ░ф╗╗хКбхИЖщЕНцЧ╢щАЪчЯечЫ╕хЕ│ш┤ицОзф║║хСШ
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хобца╕хоМцИРщАЪчЯе</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="notificationSettings.auditComplete"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  хобца╕хоМцИРцЧ╢щАЪчЯечЧЕцбИчобчРЖф║║хСШхТМчзСходш┤Яш┤гф║║
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">щАЪчЯецЦ╣х╝П</label>
                </div>
                <div class="setting-control">
                  <div class="checkbox-group">
                    <label class="checkbox-item">
                      <input 
                        type="checkbox" 
                        v-model="notificationSettings.methods.system"
                      />
                      <span class="checkbox-label">ч│╗ч╗ЯщАЪчЯе</span>
                    </label>
                    <label class="checkbox-item">
                      <input 
                        type="checkbox" 
                        v-model="notificationSettings.methods.email"
                      />
                      <span class="checkbox-label">щВоф╗╢щАЪчЯе</span>
                    </label>
                    <label class="checkbox-item">
                      <input 
                        type="checkbox" 
                        v-model="notificationSettings.methods.sms"
                      />
                      <span class="checkbox-label">чЯнф┐бщАЪчЯе</span>
                    </label>
                    <label class="checkbox-item">
                      <input 
                        type="checkbox" 
                        v-model="notificationSettings.methods.oa"
                      />
                      <span class="checkbox-label">OAч│╗ч╗Я</span>
                    </label>
                  </div>
                </div>
                <div class="setting-description">
                  щАЙцЛйцОецФ╢щАЪчЯечЪДцЦ╣х╝Пя╝МхПпф╗ехдЪщАЙ
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button class="btn btn-primary" @click="saveNotificationSettings">
              ф┐ЭхнШщАЪчЯешо╛ч╜о
            </button>
          </div>
        </div>
      </div>

      <!-- щлШч║зшо╛ч╜о -->
      <div v-show="activeCategory === 'advanced'" class="settings-section">
        <div class="card">
          <div class="card-header">
            <div class="card-title">щлШч║зхобца╕щЕНч╜о</div>
            <div class="card-actions">
              <button class="btn btn-sm btn-outline text-warning" @click="showAdvancedWarning">
                <i>тЪая╕П</i> щлШч║зшо╛ч╜о
              </button>
            </div>
          </div>
          <div class="card-body">
            <div class="settings-grid">
              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">х╣╢хПСхобца╕цХ░щЗП</label>
                </div>
                <div class="setting-control">
                  <div class="input-group">
                    <input 
                      type="number" 
                      class="form-control" 
                      v-model="advancedSettings.concurrentAudits"
                      min="1" 
                      max="20"
                    />
                    <span class="input-group-text">ф╕к</span>
                  </div>
                </div>
                <div class="setting-description">
                  ч│╗ч╗ЯхРМцЧ╢хдДчРЖчЪДхобца╕ф╗╗хКбцХ░щЗПя╝Мх╜▒хУНч│╗ч╗ЯцАзшГ╜
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хобца╕ш╢ЕцЧ╢цЧ╢щЧ┤</label>
                </div>
                <div class="setting-control">
                  <div class="input-group">
                    <input 
                      type="number" 
                      class="form-control" 
                      v-model="advancedSettings.auditTimeout"
                      min="30" 
                      max="300"
                    />
                    <span class="input-group-text">чзТ</span>
                  </div>
                </div>
                <div class="setting-description">
                  хНХф╕кчЧЕф╛Лхобца╕чЪДцЬАхдзшАЧцЧ╢я╝Мш╢ЕцЧ╢х░Жш╖│ш┐ЗшпечЧЕф╛Л
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">хРпчФиш░ГшпХцибх╝П</label>
                  <label class="switch">
                    <input 
                      type="checkbox" 
                      v-model="advancedSettings.debugMode"
                    />
                    <span class="switch-slider"></span>
                  </label>
                </div>
                <div class="setting-description">
                  хРпчФишпжч╗ЖцЧех┐Чшо░х╜Хя╝МчФиф║ОщЧощвШшпКцЦнхТМч│╗ч╗Яф╝ШхМЦ
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-header">
                  <label class="setting-label">цХ░цНоч╝УхнШчнЦчХе</label>
                </div>
                <div class="setting-control">
                  <select class="form-control" v-model="advancedSettings.cacheStrategy">
                    <option value="aggressive">чзпцЮБч╝УхнШ</option>
                    <option value="moderate">щАВх║жч╝УхнШ</option>
                    <option value="conservative">ф┐ЭхоИч╝УхнШ</option>
                    <option value="disabled">чжБчФич╝УхнШ</option>
                  </select>
                </div>
                <div class="setting-description">
                  ш░ГцХ┤ч│╗ч╗ЯцХ░цНоч╝УхнШчнЦчХея╝Мх╣│шббцАзшГ╜хТМцХ░цНохоЮцЧ╢цАз
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button class="btn btn-warning" @click="saveAdvancedSettings">
              ф┐ЭхнШщлШч║зшо╛ч╜о
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- шо╛ч╜ощвДшзИх╝╣чкЧ -->
    <div v-if="showPreviewModal" class="modal-backdrop" @click.self="closePreviewModal">
      <div class="modal-container">
        <div class="modal-header">
          <div class="modal-title">хобца╕ц╡БчиЛщвДшзИ</div>
          <button class="modal-close" @click="closePreviewModal">├Ч</button>
        </div>
        <div class="modal-body">
          <div class="workflow-preview">
            <div class="workflow-step" v-for="(step, index) in workflowSteps" :key="index">
              <div class="step-number">{{ index + 1 }}</div>
              <div class="step-content">
                <div class="step-title">{{ step.title }}</div>
                <div class="step-description">{{ step.description }}</div>
              </div>
              <div v-if="index < workflowSteps.length - 1" class="step-arrow">тЖТ</div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline" @click="closePreviewModal">хЕ│щЧн</button>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
import { ref, computed, onMounted, reactive } from 'vue'

// ч▒╗хЮЛхоЪф╣Й
interface SettingsCategory {
  key: 'auto' | 'workflow' | 'notification' | 'advanced'
  name: string
  icon: string
}

interface AutoAuditSettings {
  enabled: boolean
  frequency: string
  priority: string
  aiAssisted: boolean
  aiAutoCorrect: boolean
  aiConfidenceThreshold: number
}

interface WorkflowSettings {
  type: string
  timeLimit: number
  allowReturn: boolean
  autoAssign: boolean
  assignStrategy: string
  enableScoring: boolean
  scoringStandard: string
}

interface NotificationSettings {
  issueFound: boolean
  deadlineReminder: boolean
  taskAssignment: boolean
  auditComplete: boolean
  methods: {
    system: boolean
    email: boolean
    sms: boolean
    oa: boolean
  }
}

interface AdvancedSettings {
  concurrentAudits: number
  auditTimeout: number
  debugMode: boolean
  cacheStrategy: string
}

interface WorkflowStep {
  title: string
  description: string
}

// хУНх║Фх╝ПцХ░цНо
const activeCategory = ref<'auto' | 'workflow' | 'notification' | 'advanced'>('auto')
const showPreviewModal = ref(false)

// шо╛ч╜охИЖч▒╗
const settingsCategories: SettingsCategory[] = [
  { key: 'auto', name: 'шЗкхКихобца╕', icon: 'ЁЯдЦ' },
  { key: 'workflow', name: 'хобца╕ц╡БчиЛ', icon: 'ЁЯФД' },
  { key: 'notification', name: 'щАЪчЯешо╛ч╜о', icon: 'ЁЯФФ' },
  { key: 'advanced', name: 'щлШч║зшо╛ч╜о', icon: 'тЪЩя╕П' }
]

// шЗкхКихобца╕шо╛ч╜о
const autoAuditSettings = reactive<AutoAuditSettings>({
  enabled: true,
  frequency: 'hourly',
  priority: 'discharge',
  aiAssisted: true,
  aiAutoCorrect: false,
  aiConfidenceThreshold: 85
})

// хобца╕ц╡БчиЛшо╛ч╜о
const workflowSettings = reactive<WorkflowSettings>({
  type: 'double',
  timeLimit: 24,
  allowReturn: true,
  autoAssign: true,
  assignStrategy: 'workload',
  enableScoring: true,
  scoringStandard: 'national'
})

// щАЪчЯешо╛ч╜о
const notificationSettings = reactive<NotificationSettings>({
  issueFound: true,
  deadlineReminder: true,
  taskAssignment: true,
  auditComplete: true,
  methods: {
    system: true,
    email: true,
    sms: false,
    oa: true
  }
})

// щлШч║зшо╛ч╜о
const advancedSettings = reactive<AdvancedSettings>({
  concurrentAudits: 5,
  auditTimeout: 120,
  debugMode: false,
  cacheStrategy: 'moderate'
})

// шобчоЧх▒ЮцАз
const workflowSteps = computed<WorkflowStep[]>(() => {
  const baseSteps: WorkflowStep[] = [
    { title: 'чЧЕф╛ЛцПРф║д', description: 'хМ╗х╕ИхоМцИРчЧЕф╛Лх╜ХхЕех╣╢цПРф║д' },
    { title: 'шЗкхКищвДхоб', description: 'ч│╗ч╗ЯцЙзшбМхЯ║чбАшзДхИЩцгАцЯе' }
  ]

  if (workflowSettings.type === 'single') {
    baseSteps.push(
      { title: 'ш┤ицОзхобца╕', description: 'ш┤ицОзф║║хСШцЙзшбМхЕищЭвхобца╕' },
      { title: 'щЧощвШхдДчРЖ', description: 'хПСчО░щЧощвШш┐ЫшбМхдДчРЖхТМф┐оцнг' },
      { title: 'хобца╕хоМцИР', description: 'ш┤ицОзц╡БчиЛч╗УцЭЯ' }
    )
  } else if (workflowSettings.type === 'double') {
    baseSteps.push(
      { title: 'хИЭцнехобца╕', description: 'чммф╕Аф╜Нш┤ицОзф║║хСШш┐ЫшбМхИЭхоб' },
      { title: 'ф║дхПЙхобца╕', description: 'чммф║Мф╜Нш┤ицОзф║║хСШш┐ЫшбМхдНхоб' },
      { title: 'щЧощвШчбошод', description: 'чбошодхТМхдДчРЖхПСчО░чЪДщЧощвШ' },
      { title: 'хобца╕хоМцИР', description: 'хПМф║║хобца╕ц╡БчиЛч╗УцЭЯ' }
    )
  } else if (workflowSettings.type === 'triple') {
    baseSteps.push(
      { title: 'хИЭч║зхобца╕', description: 'хИЭч║зш┤ицОзхСШш┐ЫшбМхЯ║чбАхобца╕' },
      { title: 'ф╕нч║зхобца╕', description: 'ф╕нч║зш┤ицОзхСШш┐ЫшбМц╖▒х║жхобца╕' },
      { title: 'щлШч║зхобца╕', description: 'щлШч║зш┤ицОзхСШш┐ЫшбМч╗Ихоб' },
      { title: 'щЧощвШхдДчРЖ', description: 'хдДчРЖхРДч║зхобца╕хПСчО░чЪДщЧощвШ' },
      { title: 'хобца╕хоМцИР', description: 'ф╕Йч║зхобца╕ц╡БчиЛч╗УцЭЯ' }
    )
  }

  return baseSteps
})

// цЦ╣ц│Х
const switchCategory = (category: 'auto' | 'workflow' | 'notification' | 'advanced') => {
  activeCategory.value = category
}

const onAutoAuditToggle = () => {
  if (!autoAuditSettings.enabled) {
    autoAuditSettings.aiAssisted = false
    autoAuditSettings.aiAutoCorrect = false
  }
}

const onAIAssistedToggle = () => {
  if (!autoAuditSettings.aiAssisted) {
    autoAuditSettings.aiAutoCorrect = false
  }
}

const onWorkflowTypeChange = () => {
  // ца╣цНохобца╕ч▒╗хЮЛш░ГцХ┤щ╗ШшодцЧ╢щЩР
  switch (workflowSettings.type) {
    case 'single':
      workflowSettings.timeLimit = 24
      break
    case 'double':
      workflowSettings.timeLimit = 48
      break
    case 'triple':
      workflowSettings.timeLimit = 72
      break
  }
}

const onAutoAssignToggle = () => {
  if (!workflowSettings.autoAssign) {
    workflowSettings.assignStrategy = 'manual'
  } else {
    workflowSettings.assignStrategy = 'workload'
  }
}

const onScoringToggle = () => {
  if (!workflowSettings.enableScoring) {
    workflowSettings.scoringStandard = 'national'
  }
}

const previewWorkflow = () => {
  showPreviewModal.value = true
}

const closePreviewModal = () => {
  showPreviewModal.value = false
}

const showAdvancedWarning = () => {
  if (confirm('щлШч║зшо╛ч╜охПпшГ╜х╜▒хУНч│╗ч╗ЯцАзшГ╜хТМчи│хоЪцАзя╝Мшп╖ш░ицЕОф┐оцФ╣уАВцШпхРжч╗зч╗ня╝Я')) {
    // чФицИ╖чбошодч╗зч╗н
    console.log('чФицИ╖чбошодф┐оцФ╣щлШч║зшо╛ч╜о')
  }
}

// ф┐ЭхнШшо╛ч╜оцЦ╣ц│Х
const saveAutoAuditSettings = () => {
  // цибцЛЯф┐ЭхнШшЗкхКихобца╕шо╛ч╜о
  console.log('ф┐ЭхнШшЗкхКихобца╕шо╛ч╜о:', autoAuditSettings)
  alert('шЗкхКихобца╕шо╛ч╜оф┐ЭхнШцИРхКЯя╝Б')
}

const saveWorkflowSettings = () => {
  // цибцЛЯф┐ЭхнШц╡БчиЛшо╛ч╜о
  console.log('ф┐ЭхнШц╡БчиЛшо╛ч╜о:', workflowSettings)
  alert('хобца╕ц╡БчиЛшо╛ч╜оф┐ЭхнШцИРхКЯя╝Б')
}

const saveNotificationSettings = () => {
  // цибцЛЯф┐ЭхнШщАЪчЯешо╛ч╜о
  console.log('ф┐ЭхнШщАЪчЯешо╛ч╜о:', notificationSettings)
  alert('щАЪчЯешо╛ч╜оф┐ЭхнШцИРхКЯя╝Б')
}

const saveAdvancedSettings = () => {
  // цибцЛЯф┐ЭхнШщлШч║зшо╛ч╜о
  console.log('ф┐ЭхнШщлШч║зшо╛ч╜о:', advancedSettings)
  alert('щлШч║зшо╛ч╜оф┐ЭхнШцИРхКЯя╝Б')
}

const saveAllSettings = () => {
  // ф┐ЭхнШцЙАцЬЙшо╛ч╜о
  const allSettings = {
    autoAudit: autoAuditSettings,
    workflow: workflowSettings,
    notification: notificationSettings,
    advanced: advancedSettings
  }
  console.log('ф┐ЭхнШцЙАцЬЙшо╛ч╜о:', allSettings)
  alert('цЙАцЬЙхобца╕шо╛ч╜оф┐ЭхнШцИРхКЯя╝Б')
}

const resetToDefault = () => {
  if (confirm('чбохоЪшжБцБвхдНцЙАцЬЙшо╛ч╜охИ░щ╗ШшодхА╝хРЧя╝Я')) {
    // цБвхдНщ╗Шшодшо╛ч╜о
    Object.assign(autoAuditSettings, {
      enabled: true,
      frequency: 'hourly',
      priority: 'discharge',
      aiAssisted: true,
      aiAutoCorrect: false,
      aiConfidenceThreshold: 85
    })
    
    Object.assign(workflowSettings, {
      type: 'double',
      timeLimit: 24,
      allowReturn: true,
      autoAssign: true,
      assignStrategy: 'workload',
      enableScoring: true,
      scoringStandard: 'national'
    })
    
    Object.assign(notificationSettings, {
      issueFound: true,
      deadlineReminder: true,
      taskAssignment: true,
      auditComplete: true,
      methods: {
        system: true,
        email: true,
        sms: false,
        oa: true
      }
    })
    
    Object.assign(advancedSettings, {
      concurrentAudits: 5,
      auditTimeout: 120,
      debugMode: false,
      cacheStrategy: 'moderate'
    })
    
    alert('цЙАцЬЙшо╛ч╜ох╖▓цБвхдНщ╗ШшодхА╝я╝Б')
  }
}

const exportSettings = () => {
  // хп╝хЗ║шо╛ч╜ощЕНч╜о
  const settings = {
    autoAudit: autoAuditSettings,
    workflow: workflowSettings,
    notification: notificationSettings,
    advanced: advancedSettings
  }
  
  const dataStr = JSON.stringify(settings, null, 2)
  const dataBlob = new Blob([dataStr], { type: 'application/json' })
  const url = URL.createObjectURL(dataBlob)
  
  const link = document.createElement('a')
  link.href = url
  link.download = `audit-settings-${new Date().toISOString().split('T')[0]}.json`
  document.body.appendChild(link)
  link.click()
  document.body.removeChild(link)
  URL.revokeObjectURL(url)
  
  alert('хобца╕шо╛ч╜ощЕНч╜ох╖▓хп╝хЗ║я╝Б')
}

// хИЭхзЛхМЦ
onMounted(() => {
  console.log('хобца╕шо╛ч╜ощб╡щЭвх╖▓хКаш╜╜')
})
</script>

<style scoped>


/* хУНх║Фх╝Пшо╛шоб */
@media (width <= 768px) {
  .audit-settings-container {
    padding: 8px;
  }
  
  .page-header {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
  
  .page-actions {
    justify-content: center;
    flex-wrap: wrap;
  }
  
  .settings-categories {
    overflow-x: auto;
  }
  
  .category-item {
    flex-shrink: 0;
    min-width: 120px;
  }
  
  .radio-group {
    gap: 12px;
  }
  
  .radio-item {
    padding: 8px;
  }
  
  .radio-description {
    margin-left: 20px;
  }
  
  .checkbox-group {
    flex-direction: column;
    gap: 12px;
  }
  
  .modal-container {
    width: 95%;
    margin: 20px;
  }
  
  .workflow-step {
    flex-direction: column;
    text-align: center;
    gap: 8px;
  }
  
  .step-arrow {
    transform: rotate(90deg);
  }
}

@media (width <= 480px) {
  .page-title {
    font-size: 20px;
  }
  
  .btn {
    padding: 6px 10px;
    font-size: 12px;
  }
  
  .category-item {
    padding: 8px 12px;
    font-size: 12px;
  }
  
  .setting-header {
    flex-direction: column;
    gap: 8px;
    align-items: flex-start;
  }
  
  .input-group {
    flex-direction: column;
    gap: 8px;
  }
  
  .input-group .form-control {
    border-right: 1px solid #E0E0E0;
    border-radius: 4px;
  }
  
  .input-group-text {
    text-align: center;
    border-radius: 4px;
  }
}

.audit-settings-container {
  min-height: 100vh;
  padding: 16px;
  font-family: "Microsoft YaHei", "Segoe UI", sans-serif;
  background-color: #F5F7FA;
}

/* щб╡щЭвцаЗщвШцаП */
.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.page-title {
  font-size: 24px;
  font-weight: bold;
  color: #212121;
}

.page-actions {
  display: flex;
  gap: 8px;
}

/* цМЙщТоца╖х╝П */
.btn {
  display: flex;
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 500;
  text-decoration: none;
  cursor: pointer;
  border: none;
  border-radius: 4px;
  transition: all 0.3s;
  align-items: center;
}

.btn i {
  margin-right: 6px;
  font-size: 14px;
}

.btn-primary {
  color: white;
  background-color: #1976D2;
}

.btn-primary:hover {
  background-color: #0D47A1;
}

.btn-outline {
  color: #1976D2;
  background-color: white;
  border: 1px solid #1976D2;
}

.btn-outline:hover {
  background-color: #F5F7FA;
}

.btn-warning {
  color: white;
  background-color: #FF9800;
}

.btn-warning:hover {
  background-color: #E65100;
}

.btn-sm {
  padding: 5px 10px;
  font-size: 12px;
}

.text-warning {
  color: #FF9800 !important;
}

/* шо╛ч╜охИЖч▒╗хп╝шИк */
.settings-categories {
  display: flex;
  margin-bottom: 16px;
  overflow: hidden;
  background-color: white;
  border-radius: 6px;
  box-shadow: 0 1px 3px rgb(0 0 0 / 5%);
}

.category-item {
  display: flex;
  padding: 12px 16px;
  font-size: 13px;
  text-align: center;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.3s;
  flex: 1;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.category-item.active {
  font-weight: 500;
  color: #1976D2;
  background-color: #F5F7FA;
  border-bottom: 2px solid #1976D2;
}

.category-item:hover {
  background-color: #F5F7FA;
}

/* шо╛ч╜оф╕╗шжБхЖЕхо╣хМ║хЯЯ */
.settings-main {
  display: flex;
  flex-direction: column;
}

.settings-section {
  margin-bottom: 16px;
}

/* хНбчЙЗца╖х╝П */
.card {
  overflow: hidden;
  background-color: white;
  border-radius: 6px;
  box-shadow: 0 1px 3px rgb(0 0 0 / 5%);
}

.card-header {
  display: flex;
  padding: 16px;
  border-bottom: 1px solid #E0E0E0;
  justify-content: space-between;
  align-items: center;
}

.card-title {
  font-size: 16px;
  font-weight: 600;
  color: #212121;
}

.card-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.status-indicator {
  padding: 4px 12px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 12px;
}

.status-indicator.active {
  color: #2E7D32;
  background-color: #C8E6C9;
}

.status-indicator.inactive {
  color: #757575;
  background-color: #F5F5F5;
}

.card-body {
  padding: 16px;
}

.card-footer {
  display: flex;
  padding: 12px 16px;
  border-top: 1px solid #E0E0E0;
  justify-content: flex-end;
}

/* шо╛ч╜ощб╣ч╜Сца╝ */
.settings-grid {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* шо╛ч╜ощб╣ца╖х╝П */
.setting-item {
  transition: opacity 0.3s;
}

.setting-item.disabled {
  pointer-events: none;
  opacity: 0.5;
}

.setting-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.setting-label {
  font-size: 14px;
  font-weight: 500;
  color: #212121;
}

.setting-control {
  margin-bottom: 8px;
}

.setting-description {
  font-size: 12px;
  line-height: 1.4;
  color: #757575;
}

/* шбихНХцОзф╗╢ца╖х╝П */
.form-control {
  width: 100%;
  padding: 8px 12px;
  font-size: 13px;
  border: 1px solid #E0E0E0;
  border-radius: 4px;
  box-sizing: border-box;
  transition: border-color 0.3s;
}

.form-control:focus {
  border-color: #1976D2;
  outline: none;
  box-shadow: 0 0 0 2px rgb(25 118 210 / 10%);
}

.form-control:disabled {
  color: #9E9E9E;
  cursor: not-allowed;
  background-color: #F5F7FA;
}

/* х╝АхЕ│ца╖х╝П */
.switch {
  position: relative;
  display: inline-block;
  width: 36px;
  height: 20px;
}

.switch input {
  width: 0;
  height: 0;
  opacity: 0;
}

.switch-slider {
  position: absolute;
  inset: 0;
  cursor: pointer;
  background-color: #E0E0E0;
  border-radius: 20px;
  transition: 0.4s;
}

.switch-slider::before {
  position: absolute;
  bottom: 2px;
  left: 2px;
  width: 16px;
  height: 16px;
  background-color: white;
  border-radius: 50%;
  content: "";
  transition: 0.4s;
}

.switch input:checked + .switch-slider {
  background-color: #4CAF50;
}

.switch input:checked + .switch-slider::before {
  transform: translateX(16px);
}

.switch input:disabled + .switch-slider {
  cursor: not-allowed;
  opacity: 0.5;
}

/* ц╗СхЭЧца╖х╝П */
.slider-container {
  display: flex;
  align-items: center;
  gap: 12px;
}

.slider {
  height: 6px;
  background: #E0E0E0;
  border-radius: 3px;
  outline: none;
  appearance: none;
  flex: 1;
}

.slider::-webkit-slider-thumb {
  width: 20px;
  height: 20px;
  cursor: pointer;
  background: #1976D2;
  border-radius: 50%;
  appearance: none;
  appearance: none;
}

.slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  cursor: pointer;
  background: #1976D2;
  border: none;
  border-radius: 50%;
}

.slider-value {
  min-width: 40px;
  font-size: 13px;
  font-weight: 500;
  color: #1976D2;
}

/* хНХщАЙцМЙщТоч╗Д */
.radio-group {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.radio-item {
  display: flex;
  padding: 12px;
  cursor: pointer;
  border: 1px solid #E0E0E0;
  border-radius: 6px;
  transition: all 0.3s;
  align-items: flex-start;
}

.radio-item:hover {
  background-color: #F5F7FA;
  border-color: #1976D2;
}

.radio-item input[type="radio"] {
  margin-top: 2px;
  margin-right: 12px;
}

.radio-item input[type="radio"]:checked + .radio-label {
  font-weight: 500;
  color: #1976D2;
}

.radio-label {
  margin-bottom: 4px;
  font-size: 14px;
  font-weight: 500;
}

.radio-description {
  margin-left: 24px;
  font-size: 12px;
  color: #757575;
}

/* хдНщАЙцбЖч╗Д */
.checkbox-group {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
}

.checkbox-item {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.checkbox-item input[type="checkbox"] {
  margin-right: 8px;
}

.checkbox-label {
  font-size: 13px;
}

/* ш╛УхЕеч╗Д */
.input-group {
  display: flex;
  align-items: center;
}

.input-group .form-control {
  border-right: 0;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

.input-group-text {
  padding: 8px 12px;
  font-size: 13px;
  color: #757575;
  background-color: #F5F7FA;
  border: 1px solid #E0E0E0;
  border-top-right-radius: 4px;
  border-bottom-right-radius: 4px;
}

/* цибцАБцбЖца╖х╝П */
.modal-backdrop {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  background-color: rgb(0 0 0 / 50%);
  align-items: center;
  justify-content: center;
}

.modal-container {
  width: 800px;
  max-width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  background-color: white;
  border-radius: 6px;
  box-shadow: 0 5px 20px rgb(0 0 0 / 20%);
}

.modal-header {
  display: flex;
  padding: 16px;
  border-bottom: 1px solid #E0E0E0;
  justify-content: space-between;
  align-items: center;
}

.modal-title {
  font-size: 16px;
  font-weight: bold;
}

.modal-close {
  font-size: 20px;
  color: #757575;
  cursor: pointer;
  background: none;
  border: none;
}

.modal-body {
  padding: 16px;
}

.modal-footer {
  display: flex;
  padding: 12px 16px;
  border-top: 1px solid #E0E0E0;
  justify-content: flex-end;
}

/* х╖еф╜Ьц╡БщвДшзИца╖х╝П */
.workflow-preview {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.workflow-step {
  display: flex;
  align-items: center;
  gap: 16px;
}

.step-number {
  display: flex;
  width: 32px;
  height: 32px;
  font-size: 14px;
  font-weight: bold;
  color: white;
  background-color: #1976D2;
  border-radius: 50%;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
}

.step-title {
  margin-bottom: 4px;
  font-size: 14px;
  font-weight: 500;
  color: #212121;
}

.step-description {
  font-size: 12px;
  color: #757575;
}

.step-arrow {
  font-size: 18px;
  color: #9E9E9E;
  align-self: center;
}

/* хЯ║чбАхо╣хЩица╖х╝П */
</style>